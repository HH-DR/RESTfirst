<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" >

<head>
    <meta charset="UTF-8">
    <title>Moin</title>
</head>
<body>
<h4>Moin - Sie können hier Personen anlegen und anzeigen lassen.</h4>



<h5>Person hinzufügen</h5>
<form th:action="@{/person/add}">
    <label>Vorname</label>
    <input type="text" th:name="firstName"/>
    <label>Nachname</label>
    <input type="text" th:name="lastName"/>
    <label>Alter</label>
    <input type="number" th:name="age"/>
    <label>Senden</label>
    <input type="submit"/>
</form>

<h5>Person nach Id löschen</h5>
<form th:action="@{/person/delete}">

    <input type="number" th:name="personId"/>
    <label>Löschen</label>
    <input type="submit"/>
</form>

<h5>Alle Personen anzeigen</h5>
<button onclick="window.location.href='./person/all';">Alle anzeigen</button>



<br>
<br>
<hr>
<script type="text/JavaScript">

    function getList(){
        let data = fetch(href='./person/all')
                    .then(response => response.json())
                    .then( response => JSON.stringify(response))
        console.log(data);

        let personList = JSON.stringify(data);
        display_list.innerHTML= personList;
    }

    // .then(response => response.json())
    //     .then(returnedJsonData => {
    //
    //         console.log(returnedJsonData);
    //         createNewChart(returnedJsonData);

</script>

<button id ="refresh" onclick="getList()">Liste aktualisieren</button>
<p> Alle Personen: <br><span id ="display_list"></span> </p>




</body>
</html>